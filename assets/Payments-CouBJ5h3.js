import{u as b,a as j,r as n,g as N,j as e}from"./index-tsYpG-Wr.js";import{g as v,a as f}from"./storage-DPUFa0CT.js";const S=["Transfer","Shopping","Bills","Entertainment","Food","Transportation","Other"];function E(){const o=b(),{addUserExpense:u}=j(),[p,x]=n.useState([]),[s,i]=n.useState({recipient:"",amount:"",category:"",notes:""}),[a,l]=n.useState(!1),[c,m]=n.useState(""),[d,h]=n.useState("");n.useEffect(()=>{if(!N()){o("/login");return}x(v())},[o]);const g=t=>({Shopping:"shopping",Bills:"utilities",Entertainment:"entertainment",Food:"food",Transportation:"transportation",Transfer:"other",Other:"other"})[t]||"other",y=async t=>{if(t.preventDefault(),m(""),!a){l(!0);return}try{const r=f({...s,amount:parseFloat(s.amount),type:"payment"});await u({description:`Payment to ${s.recipient}`,amount:parseFloat(s.amount),categoryId:g(s.category),date:new Date().toISOString(),paymentId:r.id}),h("Payment successful!"),setTimeout(()=>{o(`/receipt/${r.id}`)},1e3)}catch(r){m(r.message||"An error occurred while processing your payment")}};return e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-6",children:a?"Review Payment":"Make a Payment"}),c&&e.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}),d&&e.jsx("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:d}),e.jsx("div",{className:"card",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"recipient",className:"block text-gray-700 mb-2",children:"Recipient"}),e.jsxs("select",{id:"recipient",value:s.recipient,onChange:t=>i({...s,recipient:t.target.value}),className:"input-field",required:!0,disabled:a,children:[e.jsx("option",{value:"",children:"Select a recipient"}),p.map(t=>e.jsx("option",{value:t.name,children:t.name},t.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"amount",className:"block text-gray-700 mb-2",children:"Amount ($)"}),e.jsx("input",{type:"number",id:"amount",min:"0.01",step:"0.01",value:s.amount,onChange:t=>i({...s,amount:t.target.value}),className:"input-field",required:!0,disabled:a})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"category",className:"block text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{id:"category",value:s.category,onChange:t=>i({...s,category:t.target.value}),className:"input-field",required:!0,disabled:a,children:[e.jsx("option",{value:"",children:"Select a category"}),S.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"notes",className:"block text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{id:"notes",value:s.notes,onChange:t=>i({...s,notes:t.target.value}),className:"input-field",rows:"3",disabled:a})]}),a?e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Payment Summary"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Recipient:"})," ",s.recipient]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Amount:"})," $",parseFloat(s.amount).toFixed(2)]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Category:"})," ",s.category]}),s.notes&&e.jsxs("p",{className:"mb-2",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",s.notes]})]})]}):null,e.jsxs("div",{className:"flex justify-end space-x-4",children:[a&&e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Edit Payment"}),e.jsx("button",{type:"submit",className:"btn-primary",children:a?"Confirm Payment":"Review Payment"})]})]})})]})}export{E as default};
